<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vector Flux Audio Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
        }
        .log {
            background-color: #333;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            font-family: monospace;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1>Vector Flux Audio Test</h1>
    <p>This page will help diagnose audio issues with the Vector Flux game.</p>
    
    <div>
        <button id="testButton">Test Button Sound</button>
        <button id="testLaser">Test Laser Sound</button>
        <button id="testExplosion">Test Explosion Sound</button>
        <button id="testAllSounds">Test All Sounds</button>
        <button id="checkFiles">Check File Existence</button>
    </div>
    
    <h2>Audio Files Status</h2>
    <table id="filesTable">
        <tr>
            <th>Sound</th>
            <th>Path</th>
            <th>Status</th>
        </tr>
        <tr>
            <td>Button</td>
            <td>audio/sfx/button.mp3</td>
            <td id="buttonStatus">Unchecked</td>
        </tr>
        <tr>
            <td>Laser</td>
            <td>audio/sfx/laser.mp3</td>
            <td id="laserStatus">Unchecked</td>
        </tr>
        <tr>
            <td>Enemy Hit</td>
            <td>audio/sfx/enemy_hit.mp3</td>
            <td id="enemyHitStatus">Unchecked</td>
        </tr>
        <tr>
            <td>Enemy Explosion</td>
            <td>audio/sfx/enemy_explosion.mp3</td>
            <td id="enemyExplosionStatus">Unchecked</td>
        </tr>
        <tr>
            <td>Player Hit</td>
            <td>audio/sfx/player_hit.mp3</td>
            <td id="playerHitStatus">Unchecked</td>
        </tr>
        <tr>
            <td>Shield Down</td>
            <td>audio/sfx/shield_down.mp3</td>
            <td id="shieldDownStatus">Unchecked</td>
        </tr>
        <tr>
            <td>Player Explosion</td>
            <td>audio/sfx/player_explosion.mp3</td>
            <td id="playerExplosionStatus">Unchecked</td>
        </tr>
        <tr>
            <td>Torpedo</td>
            <td>audio/sfx/torpedo.mp3</td>
            <td id="torpedoStatus">Unchecked</td>
        </tr>
    </table>
    
    <h2>Debug Log</h2>
    <div class="log" id="log"></div>
    
    <script>
        // Debug logger
        const logElement = document.getElementById('log');
        function log(message) {
            const time = new Date().toLocaleTimeString();
            logElement.innerHTML += `[${time}] ${message}<br>`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }
        
        // Sound files to test
        const soundFiles = {
            button: 'audio/sfx/button.mp3',
            laser: 'audio/sfx/laser.mp3',
            enemyHit: 'audio/sfx/enemy_hit.mp3',
            enemyExplosion: 'audio/sfx/enemy_explosion.mp3',
            playerHit: 'audio/sfx/player_hit.mp3',
            shieldDown: 'audio/sfx/shield_down.mp3',
            playerExplosion: 'audio/sfx/player_explosion.mp3',
            torpedo: 'audio/sfx/torpedo.mp3'
        };
        
        // Function to play a sound
        function playSound(name) {
            try {
                log(`Attempting to play sound: ${name}`);
                const sound = new Audio(soundFiles[name]);
                
                sound.oncanplaythrough = () => {
                    log(`✅ Sound ${name} loaded successfully and can be played`);
                    sound.play()
                        .then(() => log(`Sound ${name} playing`))
                        .catch(error => log(`❌ Error playing sound ${name}: ${error}`));
                };
                
                sound.onerror = (e) => {
                    log(`❌ Error loading sound ${name}: ${e.target.error ? e.target.error : 'Unknown error'}`);
                    document.getElementById(`${name}Status`).innerHTML = '❌ Error';
                    document.getElementById(`${name}Status`).style.color = 'red';
                };
                
                return sound;
            } catch (error) {
                log(`❌ Exception playing sound ${name}: ${error}`);
                return null;
            }
        }
        
        // Function to check if a file exists
        async function checkFileExists(url, statusElementId) {
            try {
                log(`Checking file: ${url}`);
                const response = await fetch(url, { method: 'HEAD' });
                
                if (response.ok) {
                    log(`✅ File exists: ${url}`);
                    document.getElementById(statusElementId).innerHTML = '✅ Exists';
                    document.getElementById(statusElementId).style.color = 'green';
                    return true;
                } else {
                    log(`❌ File not found: ${url} (Status: ${response.status})`);
                    document.getElementById(statusElementId).innerHTML = `❌ Not found (${response.status})`;
                    document.getElementById(statusElementId).style.color = 'red';
                    return false;
                }
            } catch (error) {
                log(`❌ Error checking file ${url}: ${error}`);
                document.getElementById(statusElementId).innerHTML = `❌ Error: ${error.message}`;
                document.getElementById(statusElementId).style.color = 'red';
                return false;
            }
        }
        
        // Check all files
        document.getElementById('checkFiles').addEventListener('click', async () => {
            log('Checking all sound files...');
            
            for (const [name, path] of Object.entries(soundFiles)) {
                const statusId = `${name}Status`;
                document.getElementById(statusId).innerHTML = 'Checking...';
                await checkFileExists(path, statusId);
            }
            
            log('File check complete');
        });
        
        // Test button sound
        document.getElementById('testButton').addEventListener('click', () => {
            playSound('button');
        });
        
        // Test laser sound
        document.getElementById('testLaser').addEventListener('click', () => {
            playSound('laser');
        });
        
        // Test explosion sound
        document.getElementById('testExplosion').addEventListener('click', () => {
            playSound('enemyExplosion');
        });
        
        // Test all sounds
        document.getElementById('testAllSounds').addEventListener('click', () => {
            log('Testing all sounds in sequence...');
            
            let delay = 0;
            const increment = 1000; // 1 second between sounds
            
            for (const name in soundFiles) {
                setTimeout(() => {
                    log(`Playing ${name} sound...`);
                    playSound(name);
                }, delay);
                delay += increment;
            }
        });
        
        // Detect browser
        function detectBrowser() {
            const userAgent = navigator.userAgent;
            let browserName;
            
            if (userAgent.match(/chrome|chromium|crios/i)) {
                browserName = "Chrome";
            } else if (userAgent.match(/firefox|fxios/i)) {
                browserName = "Firefox";
            } else if (userAgent.match(/safari/i)) {
                browserName = "Safari";
            } else if (userAgent.match(/opr\//i)) {
                browserName = "Opera";
            } else if (userAgent.match(/edg/i)) {
                browserName = "Edge";
            } else {
                browserName = "Unknown";
            }
            
            return browserName;
        }
        
        // Initial log
        document.addEventListener('DOMContentLoaded', () => {
            log(`Audio test page loaded`);
            log(`Browser: ${detectBrowser()}, User Agent: ${navigator.userAgent}`);
            log(`Click 'Check File Existence' to verify sound files are accessible`);
            log(`Click on any of the test buttons to play sounds`);
        });
    </script>
</body>
</html> 