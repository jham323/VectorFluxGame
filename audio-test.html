<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio File Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-button {
            padding: 10px 15px;
            margin: 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-button:hover {
            background-color: #45a049;
        }
        #log {
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .audio-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 100px;
            gap: 10px;
            margin-bottom: 10px;
        }
        .audio-grid > div {
            padding: 5px;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>
    <h1>Audio File Test</h1>
    <p>This page tests if the sound files are accessible from GitHub Pages.</p>
    
    <div>
        <button id="checkFiles" class="test-button">Check All Files</button>
        <button id="testAllSounds" class="test-button">Test All Sounds</button>
    </div>
    
    <h2>Individual Sound Tests</h2>
    <div class="audio-grid">
        <div><strong>Sound Name</strong></div>
        <div><strong>File Path</strong></div>
        <div><strong>Status</strong></div>
    </div>
    
    <div class="audio-grid">
        <div>Laser</div>
        <div>audio/sfx/laser.mp3</div>
        <div id="laserStatus">-</div>
    </div>
    
    <div class="audio-grid">
        <div>Torpedo</div>
        <div>audio/sfx/torpedo.mp3</div>
        <div id="torpedoStatus">-</div>
    </div>
    
    <div class="audio-grid">
        <div>Enemy Hit</div>
        <div>audio/sfx/enemy_hit.mp3</div>
        <div id="enemyHitStatus">-</div>
    </div>
    
    <div class="audio-grid">
        <div>Enemy Explosion</div>
        <div>audio/sfx/enemy_explosion.mp3</div>
        <div id="enemyExplosionStatus">-</div>
    </div>
    
    <div class="audio-grid">
        <div>Player Hit</div>
        <div>audio/sfx/player_hit.mp3</div>
        <div id="playerHitStatus">-</div>
    </div>
    
    <div class="audio-grid">
        <div>Shield Down</div>
        <div>audio/sfx/shield_down.mp3</div>
        <div id="shieldDownStatus">-</div>
    </div>
    
    <div class="audio-grid">
        <div>Player Explosion</div>
        <div>audio/sfx/player_explosion.mp3</div>
        <div id="playerExplosionStatus">-</div>
    </div>
    
    <div class="audio-grid">
        <div>Button</div>
        <div>audio/sfx/button.mp3</div>
        <div id="buttonStatus">-</div>
    </div>
    
    <div class="audio-grid">
        <div>Music (Dreams)</div>
        <div>audio/Dreams.mp3</div>
        <div id="dreamsStatus">-</div>
    </div>
    
    <h2>Path Options Testing</h2>
    <div id="pathTests"></div>
    
    <h2>Log</h2>
    <div id="log"></div>
    
    <script>
        // Debug logger
        const logElement = document.getElementById('log');
        function log(message) {
            const time = new Date().toLocaleTimeString();
            logElement.innerHTML += `[${time}] ${message}<br>`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }
        
        // Sound files to test
        const soundFiles = {
            laser: 'audio/sfx/laser.mp3',
            torpedo: 'audio/sfx/torpedo.mp3',
            enemyHit: 'audio/sfx/enemy_hit.mp3',
            enemyExplosion: 'audio/sfx/enemy_explosion.mp3',
            playerHit: 'audio/sfx/player_hit.mp3',
            shieldDown: 'audio/sfx/shield_down.mp3',
            playerExplosion: 'audio/sfx/player_explosion.mp3',
            button: 'audio/sfx/button.mp3',
            dreams: 'audio/Dreams.mp3'
        };
        
        // Path options to test
        const pathOptions = [
            '', // Relative from current page
            '/', // Root relative
            '/VectorFluxGame/', // GitHub Pages relative
            'https://jham323.github.io/VectorFluxGame/', // Absolute URL
            window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/') + 1) // Current directory
        ];
        
        // Function to check if a file exists
        function checkFileExists(url) {
            return new Promise((resolve) => {
                fetch(url, { method: 'HEAD' })
                    .then(response => {
                        resolve(response.ok);
                    })
                    .catch(() => {
                        resolve(false);
                    });
            });
        }
        
        // Function to test all path options for a specific file
        async function testPathOptions(file) {
            const pathTestsDiv = document.getElementById('pathTests');
            const fileTestDiv = document.createElement('div');
            fileTestDiv.innerHTML = `<h3>${file}</h3>`;
            pathTestsDiv.appendChild(fileTestDiv);
            
            for (const basePath of pathOptions) {
                const fullPath = basePath + soundFiles[file];
                const exists = await checkFileExists(fullPath);
                
                const resultDiv = document.createElement('div');
                resultDiv.innerHTML = `
                    <div style="margin-bottom: 5px;">
                        <span style="color: ${exists ? 'green' : 'red'}">
                            ${exists ? '✓' : '✗'}
                        </span>
                        ${fullPath}
                    </div>
                `;
                fileTestDiv.appendChild(resultDiv);
                
                if (exists) {
                    document.getElementById(`${file}Status`).innerHTML = '✓';
                    document.getElementById(`${file}Status`).style.color = 'green';
                    log(`File exists: ${fullPath}`);
                    break;
                }
            }
        }
        
        // Function to test all files
        async function testAllFiles() {
            log('Testing all files...');
            document.getElementById('pathTests').innerHTML = '';
            
            for (const file in soundFiles) {
                await testPathOptions(file);
            }
            
            log('File testing complete');
        }
        
        // Function to play a sound
        function playSound(name) {
            try {
                log(`Attempting to play sound: ${name}`);
                const sound = new Audio(soundFiles[name]);
                
                sound.oncanplaythrough = () => {
                    log(`✅ Sound ${name} loaded successfully and can be played`);
                    sound.play()
                        .then(() => log(`Sound ${name} playing`))
                        .catch(error => log(`❌ Error playing sound ${name}: ${error}`));
                };
                
                sound.onerror = (e) => {
                    log(`❌ Error loading sound ${name}: ${e.target.error ? e.target.error : 'Unknown error'}`);
                };
                
                return sound;
            } catch (error) {
                log(`❌ Exception playing sound ${name}: ${error}`);
                return null;
            }
        }
        
        // Test all sounds in sequence
        function testAllSounds() {
            log('Testing all sounds in sequence...');
            
            let delay = 0;
            const increment = 1000; // 1 second between sounds
            
            for (const name in soundFiles) {
                setTimeout(() => {
                    log(`Playing ${name} sound...`);
                    playSound(name);
                }, delay);
                delay += increment;
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            log(`Audio test page loaded`);
            log(`URL: ${window.location.href}`);
            log(`Pathname: ${window.location.pathname}`);
            
            // Add event listeners
            document.getElementById('checkFiles').addEventListener('click', testAllFiles);
            document.getElementById('testAllSounds').addEventListener('click', testAllSounds);
        });
    </script>
</body>
</html> 